# Работа с базами данных ClickHouse

В этом разделе описана основная информация про работу с внешней базой данных [ClickHouse](https://clickhouse.com).

Для работы с внешней базой данных ClickHouse необходимо выполнить следующие шаги:
1. Создать [секрет](../datamodel/secrets.md), содержащий пароль для подключения к базе данных.
1. Создать [внешний источник данных](../datamodel/external_data_source.md), ведущий на кластер ClickHouse. Для корректной работы с внешними источниками необходимо иметь сетевые доступы со всех хостов {{ydb-full-name}} в целевую систему.
1. [Выполнить запрос](#query) к базе данных.


## Синтаксис запросов { #query }
Для работы с ClickHouse используется следующая форма SQL-запроса:

```sql
SELECT * FROM test_datasource.`<db>.<table>`
```

где:
- `test_datasource` - название созданного подключения к БД.
- `<db>` - имя базы данных ClickHouse в кластере.
- `<table>` - имя таблицы в базе данных.

## Ограничения

При работе с кластерами ClickHouse существует ряд ограничений.

{% note warning %}

В настоящий момент независимо от указанных фильтров для чтения таблиц ClickHouse, указанных в SQL-запросе, все данные из таблицы считываются в {{ydb-full-name}} и уже там происходит применение фильтров.

{% endnote %}

Ограничения:
1. Поддерживаются только запросы чтения данных - `SELECT`, остальные виды запросов не поддерживаются.
1. Максимальное поддерживаемое количество строк в таблице - 1000000. При превышении этого значения запрос завершается с ошибкой.
1. {% include [!](_includes/datetime_limits.md) %}

## Поддерживаемые типы данных

Ниже приведена таблица соответствия типов ClickHouse и типов {{ydb-full-name}}.

|Тип данных ClickHouse|Тип данных {{ydb-full-name}}|Примечания|
|---|----|------|
|`Bool`|`Bool`||
|`Int8`|`Int8`||
|`UInt8`|`Uint8`||
|`Int16`|`Int16`||
|`UInt16`|`Uint16`||
|`Int32`|`Int32`||
|`UInt32`|`Uint32`||
|`Int64`|`Int64`||
|`UInt64`|`Uint64`||
|`Float32`|`Float`||
|`Float64`|`Double`||
|`Date`|`Date`||
|`DateTime`|`DateTime`|Допустимый диапазон дат с 1970-01-01 00:00 и до 2105-12-31 23:59|
|`String`|`String`||
|`FixedString`|`String`|Нулевые байты `FixedString` переносятся в `String` без изменений|

Остальные типы данных не поддерживаются.
